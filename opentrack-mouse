#!/bin/bash
# Control script for opentrack mouse

case "$1" in
    toggle)
        if [ -f /tmp/opentrack_mouse.pid ]; then
            PID=$(tail -1 /tmp/opentrack_mouse.pid)
            kill -SIGUSR1 $PID 2>/dev/null && echo "Toggled head tracking" || echo "Head tracking not running"
        else
            echo "Head tracking not running"
        fi
        ;;
    calibrate)
        if [ -f /tmp/opentrack_mouse.pid ]; then
            PID=$(tail -1 /tmp/opentrack_mouse.pid)
            kill -SIGUSR2 $PID 2>/dev/null && echo "Recalibration started..." || echo "Head tracking not running"
        else
            echo "Head tracking not running"
        fi
        ;;
    *)
        echo "Usage: opentrack-mouse {toggle|calibrate}"
        echo "  toggle     - Toggle head tracking on/off"
        echo "  calibrate  - Trigger live recalibration (without restarting)"
        ;;
esac
